<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Java Calendar</title>
	<link rel="stylesheet" type="text/css" href="css/java-calendar.css">
	<style>
		body{
		  margin:0;
		  font-family: "Segoe UI", Roboto, Arial, sans-serif;
		  background:var(--muted);
		  color:var(--text);
		  -webkit-font-smoothing:antialiased;
		}
	</style>
</head>
<body>

	<div id="java-calendar"></div>

<script src="js/java-calendar.js"></script>

<script>
	async function getHolidays() {
	    try {
	        const response = await fetch('https://grei.pythonanywhere.com/api/id_holiday/2025-01-01/2025-12-31');
	        const data = await response.json();

	        // data berbentuk object { "YYYY-MM-DD": "Nama Libur", ... }
	        if (data && typeof data === 'object') {
	            const holidays = {};

	            Object.entries(data).forEach(([dateStr, title]) => {
	                // ubah format tanggal ke "YYYY-M-D" agar sesuai dengan class JavaneseCalendar
	                const [year, month, day] = dateStr.split('-').map(Number);
	                const key = `${year}-${month}-${day}`;

	                holidays[key] = {
	                    title: title,
	                    type: 'red',
	                    startDate: key,
	                    endDate: key,
	                    description: `Hari libur nasional: ${title}`
	                };
	            });

	            // Contoh event multi-hari (bisa disesuaikan dengan sumber data Anda)
	            // Format: startDate dan endDate untuk event yang berlangsung beberapa hari
	            holidays['2025-12-25'] = {
	                title: 'Libur Natal',
	                type: 'red',
	                startDate: '2025-12-25',
	                endDate: '2025-12-27',  // libur sampai 27 Desember
	                description: 'Libur Natal dan Boxing Day. Hari raya umat Kristiani untuk memperingati kelahiran Yesus Kristus.'
	            };

	            holidays['2025-6-28'] = {
	                title: 'Libur Idul Adha',
	                type: 'red',
	                startDate: '2025-6-28',
	                endDate: '2025-6-29',  // libur 2 hari
	                description: 'Hari Raya Idul Adha atau Hari Raya Qurban. Memperingati kesediaan Ibrahim untuk mengorbankan putranya sebagai ketaatan kepada Allah.'
	            };

	            holidays['2025-10-5'] = [
					{ "title": "Rapat OSIS", "type": "blue", "startDate": "2025-10-5", "endDate": "2025-10-7", "description": "..." },
					{ "title": "Rapat Guru", "type": "yellow", "startDate": "2025-10-5", "endDate": "2025-10-5", "description": "..." },
					{ "title": "Pengajian Akbar", "type": "green", "startDate": "2025-10-5", "endDate": "2025-10-5", "description": "..." },
					{ "title": "Libur ahad", "type": "red", "startDate": "2025-10-5", "endDate": "2025-10-5", "description": "..." }
				];

	            // Contoh event lintas bulan
	            holidays['2025-9-27'] = {
	                title: 'Imtihan Semester',
	                type: 'blue',
	                startDate: '2025-9-27',
	                endDate: '2025-10-2',  // dari September ke Oktober
	                description: 'Libur panjang akhir bulan September hingga awal Oktober. Waktu yang tepat untuk berlibur bersama keluarga.'
	            };

	            return holidays;
	        } else {
	            console.warn('Struktur data tidak sesuai:', data);
	            return {};
	        }
	    } catch (error) {
	        console.error('Error fetching holiday:', error);
	        return {};
	    }
	}

	getHolidays().then(holidays => {
		jCalendar('java-calendar', {holidays, holidays});
    });

	
</script>
</body>
</html>